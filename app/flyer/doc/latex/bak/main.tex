\documentclass[10pt,a4paper]{article}

\usepackage{xeCJK}
\usepackage{makeidx}
\usepackage[colorlinks,linkcolor=red]{hyperref}

% 代码高亮
\usepackage{xcolor}
\usepackage{listings}
\lstset{numbers=left,
    numberstyle=\tiny,
    keywordstyle=\color{blue!70}, commentstyle=\color{red!50!green!50!blue!50},
    frame=shadowbox,
    rulesepcolor=\color{red!20!green!20!blue!20}
}
\usepackage{multirow}

% 数学公式
\usepackage{amsmath}
% 加粗希腊字母
\usepackage{bm}
% 公式编号
\makeatletter
\@addtoreset{equation}{section}
\makeatother 
\renewcommand\theequation{\oldstylenums{\thesection} .\oldstylenums{\arabic{equation}}}

% 参考文献 引用
\usepackage[numbers,sort&compress]{natbib}
\renewcommand{\citet}[1]{\textsuperscript{\cite{#1}}}
\renewcommand{\citep}[1]{\textsuperscript{\cite{#1}}}
\addtolength{\bibsep}{-0.5 em} % 缩小参考文献间的垂直间距
\setlength{\bibhang}{2em}
\newcommand{\bibnumfont}[1]{\textit{#1}}
%\newcommand{\bibfont}{\normalfont}% 不宜使用中文字号，因为中文字号定义中包含了多余的行距
%\renewcommand\bibnumfmt[1]{#1}  %去掉文末文献列表的[]（数字或上标模式）


%中文断行
\XeTeXlinebreaklocale "zh"
%段首缩进
\parindent 2em
\usepackage{indentfirst}
%文泉驿 字体
\setCJKmainfont{文泉驿等宽微米黑:style=Regular}
%\setCJKmainfont{文泉驿等宽正黑:style=Regular}
%楷体
%\setCJKmainfont{AR PL UKai CN:style=Regular}

% 将日期变为中文格式
\renewcommand{\today}{\number\year 年 \number\month 月 \number\day 日}

% 将目录标题改为中文
\renewcommand{\contentsname}{目录}

%制作索引
\makeindex
\printindex
\setcounter{secnumdepth}{5}

\title{姿态融合算法}
\author{彭鹏(QQ:516190948)}

\begin{document}
\maketitle
\newpage
\tableofcontents
\listoffigures
\listoftables

\begin{abstract}
    摘要文档，待实现\ldots
\end{abstract}
\newpage

% section — subsection — subsubsection — paragraph — subparagraph
\section{术语表} 
以下是术语表:
\begin{table}[!hbp]
\begin{center}
    \begin{tabular}{|l|l|}
        \hline
        术语名 & 含义 \\
        \hline
        n系 & 导航坐标系,$x,y,z$分别表示北东天 \\
        \hline
        s系 & 传感器坐标系也可以认为是载体坐标系,$x,y,z$分别表示前右上 \\
        \hline
        姿态 & 飞行器相对于n系的旋转 \\
        \hline
        四元数 & 算法内部飞行器姿态的数学表示 \\
        \hline
        欧拉角 & 用来确定飞行器姿态的3个一组的独立角度,最直观的姿态数学表示 \\
        \hline
        估计姿态 & 陀螺仪独立积分计算出的姿态 \\
        \hline
        常矢量 & 方向和长度不随坐标系变化的矢量 \\
        \hline
    \end{tabular}
    \caption{术语表\label{术语表}}
\end{center}
\end{table}

文中的陀螺仪、加速度计、磁力计都是三轴的。
\newpage

\section{概述}
四轴飞行器主要包括:姿态算法和控制算法两种算法。姿态算法完成飞行器自身姿态的计算，控制算法使用姿态计算出需要施加的控制量完成姿态控制，本文主要分析姿态算法。

姿态算法是四轴飞行器的核心算法，姿态算法的核心器件是陀螺仪，陀螺仪可以测量自身旋转的角速度。理论上只要陀螺仪精度足够，结合初始姿态通过积分可以计算飞行器任意时刻的姿态。然并卵，现实是残酷的，由于成本和尺寸的限制，四轴只能使用MEMS陀螺仪。MEMS陀螺仪精度不佳并有较大的漂移，在长时间的积分过程中会导致很大的积分误差，导致估计姿态随着时间累计而变得不可接受\citep{捷联惯导航}。

怎么办呢？\citep{9轴融合论文}联想轮船,陀螺仪类似舵手,舵手长时间独立工作后会将船带偏，这个时候需要了望手来不断纠偏。通常四轴中使用加速度计来充当了望手，纠偏轮船的方向。加速度计通过测量重力场的方向纠正陀螺仪积分得到的姿态,普通的四轴飞行器使用陀螺仪和加速度计就可以完成精度可接受的姿态解算。但是有一个问题，重力场方向竖直向下，可以纠正飞行器的水平倾斜，但飞行器绕重力场方向的旋转没法纠正。所以仅用6轴(陀螺仪3轴，加速度计3轴)融合的姿态只能保证飞行器的水平平衡，无法保证其航向稳定\footnote{会水平旋转}，说通俗一点也就是飞行器会找不到北。类似加速度计的思路，传感器组合中加入一个测量地磁的传感器\citep{经典博客}，就可以纠正飞行器航向上的偏移，这就是通常所说的9轴姿态融合。

\section{算法}
为了便于分析，飞行器静止时，使s系前右上与n系北东天分别重合。姿态的解算就是求取s系相对于n系旋转的角度,表示姿态的方法很多，本文使用欧拉角和四元数表示姿态。姿态解算的中间过程用四元数，姿态解算的结果用欧拉角。原因是欧拉角物理含义明确便于执行后面的飞行控制，四元数做姿态计算可以降低运算量，由于算法内部使用四元数表示姿态，后文姿态和四元数混用。下面先对姿态算法的一些数学概念作出说明:

% subsection
\input{math.tex}

% subsection
\input{3axis.tex}

% section
\input{todo.tex}

% 参考文献
\newpage
% 将参考文献标题改为中文
% article 使用
\renewcommand\refname{参考文献}
% book 使用
%\renewcommand\bibname{参考文献}
\centering %居中
\bibliographystyle{plain}
\bibliography{main}

\end{document}

